<script type="text/javascript">
  $(document).ready(function () {
    // Predict Disease
    $('#predict_btn').click(function () {
      console.log('Button Predict Clicked')
      var s1 = $('.myform #Symptom1').val()
      var s2 = $('.myform #Symptom2').val()
      var s3 = $('.myform #Symptom3').val()
      var s4 = $('.myform #Symptom4').val()
      var s5 = $('.myform #Symptom5').val()
      var id = $('.myform #user_id').val()
  
      console.log(s1)
      console.log(s2)
      console.log(s3)
      console.log(s4)
      console.log(s5)
      console.log(id)
  
      if (s1 === '' || s2 === '' || s3 === '' || s4 === '' || s5 === '') {
        alert('Please fill in all symptoms')
      } else {
        mydata = { id: id, s2: s2, s3: s3, s4: s4, s5: s5, s1: s1 }
        $.ajax({
          url: "{% url 'predict' %}",
          method: 'POST',
          data: mydata,
  
          success: function (data) {
            x = data.status
            console.log('Data Sent To The Backend')
            console.log('Predicted Disease', x)
            if (x) {
              $('#result').html('<div class="alert alert-success" role="alert">There Are Chances You Have ' + x + '</div>')
            } else {
              $('#result').html('<div class="alert alert-warning" role="alert">No Disease Prediction Available</div>')
            }
          }
        })
      }
    })
  
    // Make Appointment
    $('#tbody').on('click', '.btn_ment', function () {
      console.log('Button Appointment Clicked')
      let disease = $(this).attr('data-sid')
      var userid = $('#tbody #user_id').val()
  
      console.log('Prediction ID is', disease)
      console.log('User ID is', userid)
  
      mydata = { disease: disease, userid: userid }
      $.ajax({
        url: "{% url 'appointment'%}",
        method: 'POST',
        data: mydata,
  
        success: function (data) {
          x = data.status
          console.log('Data Sent To The Backend')
          console.log('Appointment Status Is ', x)
  
          if (x == 'saved') {
            $('#appointment_result').html('<div class="alert alert-success" role="alert">Appointment Was Successfully Requested</div>')
          } else if (x == 'exist') {
            $('#appointment_result').html('<div class="alert alert-warning" role="alert">Appointment Request Exist</div>')
          } else {
            $('#appointment_result').html('<div class="alert alert-danger" role="alert">Something Went Wrong</div>')
          }
        }
      })
    })
  
    // Make Appointment
    $('#tbody').on('click', '.btn_view', function () {
      console.log('Button Symptoms Clicked')
      let disease = $(this).attr('data-sid')
      var userid = $('#tbody #user_id').val()
  
      console.log('Prediction ID is', disease)
      console.log('User ID is', userid)
  
      mydata = { disease: disease, userid: userid }
      $.ajax({
        url: '',
        method: 'POST',
        data: mydata,
  
        success: function (data) {
          console.log('Data Sent To The Backend')
        }
      })
    })
  })
</script>
